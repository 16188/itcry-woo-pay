# ITCRY WOOPAY - 旗舰级 WooCommerce 免签约支付网关

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![WordPress Requires at least](https://img.shields.io/badge/WordPress-%3E%3D5.0-blue.svg)](https://wordpress.org/download/)
[![WC Requires at least](https://img.shields.io/badge/WooCommerce-%3E%3D5.0-blue.svg)](https://woocommerce.com/)
[![PHP Version](https://img.shields.io/badge/PHP-%3E%3D8.0-blue.svg)](https://www.php.net/)

**专为追求极致体验与安全性的 WooCommerce 商家打造的一站式免签约支付解决方案。**

ITCRY WOOPAY 是一个经过深度重构和安全加固的支付插件，它将两大主流免签约支付接口 **码支付 (Codepay)** 与 **易支付 (Easypay)** 无缝集成到 WooCommerce 中，并注入了众多独家高级功能，旨在提供企业级的稳定性与用户体验。

---

## 🚀 为什么选择 ITCRY WOOPAY？

*   **功能强大**: 不仅仅是支付，更提供了多通道轮询、动态手续费等精细化运营工具。
*   **坚如磐石**: 从支付验签到代码底层，构建了三重安全防护体系，为您的资金保驾护航。
*   **体验丝滑**: 彻底告别支付后的404错误，提供智能、无缝的跳转体验，有效提升订单转化率。
*   **持续进化**: 积极兼容 WooCommerce 最新特性（如HPOS），并由专业开发者持续维护更新。

## ✨ 核心功能

### 1. 全面的支付通道支持

*   **码支付 (Codepay)**: 支付宝、微信支付、QQ钱包。
*   **易支付 (Easypay)**: 支付宝、微信支付、QQ钱包。

### 2. 独家高级运营功能

*   **[独家] 易支付多通道轮询与额度管理**:
    *   在后台配置多个易支付接口，并为每个接口设置“每日收款上限”。
    *   插件会根据收款额度**智能轮询切换**可用通道，完美规避单账号收款限制，规避易支付跑路风险，最大化保障业务连续性。
*   **[独家] 动态手续费**:
    *   为不同的易支付通道设置**自定义百分比手续费**。
    *   手续费在结账时自动计算并叠加，帮助您灵活嫁接成本，实现精细化运营。

### 3. 企业级的安全保障

*   **严格签名校验**: 所有支付回调均通过严格的 `Signature` 校验，从源头杜绝伪造通知和“假回调”风险。
*   **安全过滤**: 对后台设置的输入和输出进行全面安全过滤，有效防止跨站脚本攻击 (XSS)。
*   **漏洞修复**: 修复了原生码支付接口中存在的金额校验漏洞，确保每一笔订单金额的准确性。

### 4. 智能化的用户体验

*   **无缝支付跳转**: 彻底解决了支付成功后跳转到错误页面或 `404 Not Found` 的历史难题。
*   **自定义跳转**: 支持设置全局统一的支付成功跳转页面，满足您的个性化业务流程需求。
*   **智能订单回跳**: 当自定义跳转地址**留空**时，会自动跳转到 WooCommerce 标准的**订单详情页**。此功能对销售虚拟、自动发货类商品的网站体验极佳。

### 5. 开发者友好 & 高度可扩展

*   **现代化代码架构**: 插件完全采用**面向对象 (OOP)** 方式重构，代码结构清晰、逻辑分明，易于维护和二次开发。
*   **遵循最佳实践**: 严格遵循 WordPress 和 WooCommerce 的开发规范，确保最佳的兼容性和性能。
*   **兼容最新环境**: 已全面支持 **PHP 8.0+**，并率先兼容 WooCommerce **高性能订单存储 (HPOS)**。

## ⚙️ 安装指南

您可以通过以下两种方式轻松安装本插件：

#### 方式一：通过 WordPress 后台上传 (推荐)

1.  前往本项目的 [**GitHub Releases**](https://github.com/16188/itcry-woo-pay/releases) 页面。
2.  下载最新的 `itcry-woo-pay.zip` 发行包。
3.  登录您的 WordPress 后台，导航至 `插件` > `安装插件`。
4.  点击顶部的 `上传插件` 按钮，选择刚刚下载的 .zip 文件并上传。
5.  安装成功后，点击 `启用插件`。

#### 方式二：通过 FTP 手动上传

1.  下载并解压本项目的最新源码。
2.  使用 FTP 客户端，将解压后的整个 `itcry-woo-pay` 文件夹上传到您网站的 `/wp-content/plugins/` 目录下。
3.  登录您的 WordPress 后台，在 `插件` > `已安装的插件` 列表中找到 "ITCRY WOOPAY" 并启用它。

## 🛠️ 快速配置

插件启用后，仅需几步即可开始收款：

1.  在 WordPress 后台，点击左侧菜单新增的 “**ITCRY支付**” 选项。
2.  在 **码支付 (Codepay)** 和 **易支付 (Easypay)** 两个标签页中，选择并填写您的 API 信息。
3.  **配置跳转地址 (重要)**：
    *   **填写 URL**: 支付成功后将跳转到您指定的页面。
    *   **留空**: 支付成功后将自动跳转到该笔订单的详情页。
4.  **保存设置**。
5.  前往 `WooCommerce` > `设置` > `付款` 标签页，找到并**启用**您需要的支付方式（例如“易支付 - 微信支付”）。

一切就绪！您的网站现在已经拥有了强大而稳定的收款能力。

## 📸 截图预览

**后台设置页面:**
![后台设置截图](https://sc04.alicdn.com/kf/A611d385ef3ee43ba979f16656d3a9070W/231863025/A611d385ef3ee43ba979f16656d3a9070W.jpg)

## 📄 许可证

本项目基于 **GPL-3.0 License** 开源。详情请参阅 `LICENSE` 文件。
